<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal AI Assistant - Chat</title>
    
    <!-- Base CSS -->
    <link rel="stylesheet" href="../../static/css/base/reset.css">
    <link rel="stylesheet" href="../../static/css/base/variables.css">
    <link rel="stylesheet" href="../../static/css/base/global.css">
    <link rel="stylesheet" href="../../static/css/main.css">
    
    <!-- Page CSS -->
    <link rel="stylesheet" href="../../static/css/pages/chat.css">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- ✅ Header will be injected by HeaderComponent (your original header) -->
    
    <!-- Full Screen Chat Container -->
    <main class="chat-container">
        <!-- Chat Messages Area -->
        <div class="chat-messages" id="chatMessages">
            <!-- Welcome Message -->
            <div class="welcome-message">
                <div class="welcome-icon">
                    <i class="fas fa-scale-balanced"></i>
                </div>
                <h2>Welcome to Legal AI Assistant</h2>
                <p>Ask me anything about legal matters, contracts, or risk assessments. I'm here to help simplify complex legal concepts.</p>
                
                <!-- Suggested Questions -->
                <div class="suggested-questions">
                    <button class="suggestion-btn" data-question="What are common contract risks I should be aware of?">
                        <i class="fas fa-exclamation-triangle"></i>
                        What are common contract risks I should be aware of?
                    </button>
                    <button class="suggestion-btn" data-question="Explain liability clauses in simple terms">
                        <i class="fas fa-shield-alt"></i>
                        Explain liability clauses in simple terms
                    </button>
                    <button class="suggestion-btn" data-question="How can I protect my intellectual property?">
                        <i class="fas fa-lightbulb"></i>
                        How can I protect my intellectual property?
                    </button>
                </div>
            </div>
        </div>

        <!-- Chat Input Area -->
        <div class="chat-input-area">
            <!-- Context Indicator (when document is loaded) -->
            <div class="context-indicator" id="contextIndicator" style="display: none;">
                <div class="context-info">
                    <i class="fas fa-file-contract"></i>
                    <span id="contextFilename">Document context active</span>
                    <button class="remove-context-btn" id="removeContextBtn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Clear Chat Button (positioned above input) -->
            <div class="chat-controls">
                <button class="clear-chat-btn" id="clearChatBtn">
                    <i class="fas fa-broom"></i>
                    Clear Chat
                </button>
            </div>

            <!-- Input Container -->
            <div class="input-container">
                <!-- Recent Documents Dropdown -->
                <div class="input-dropdown" id="recentDocsDropdown">
                    <button class="dropdown-trigger" id="recentDocsBtn" title="Select recent document">
                        <i class="fas fa-file-text"></i>
                    </button>
                    <div class="dropdown-content" id="recentDocsContent" style="display: none;">
                        <div class="dropdown-header">
                            <span>Recent Documents</span>
                        </div>
                        <div class="recent-docs-list" id="recentDocsList">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Upload Button -->
                <button class="input-action-btn" id="uploadBtn" title="Upload document">
                    <i class="fas fa-upload"></i>
                </button>
                
                <!-- Text Input -->
                <div class="input-wrapper">
                    <textarea 
                        id="chatInput" 
                        placeholder="Ask me anything about legal matters..."
                        rows="1"
                    ></textarea>
                </div>
                
                <!-- Send Button -->
                <button class="send-btn" id="sendBtn" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            
            <!-- Input Hint -->
            <div class="input-hint">
                Press <kbd>Enter</kbd> to send • <kbd>Shift+Enter</kbd> for new line
            </div>
        </div>
    </main>

    <!-- Hidden File Input -->
    <input type="file" id="fileInput" accept=".pdf,.docx,.txt,.doc" hidden>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>Processing your request...</p>
        </div>
    </div>

    <!-- ✅ Scripts - Including your original header component -->
    <script src="../../static/js/utils/helpers.js"></script>
    <script src="../../static/js/components/header.js"></script>
    <script src="../../static/js/api/chat.js"></script>
    <script src="../../static/js/pages/chat.js"></script>
    <script src="../../static/js/main.js"></script>
</body>
</html>
